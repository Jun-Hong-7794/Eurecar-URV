/* Eurecar Scenario Script 
/* Made By Jun Hong 28.01.2017
/* This Script is for 2107 MBZIRC Challenge2
/*

# Title: Valve Recognition

## Step0: Magnet Off

GRIPPER_MAGNET_CTRL_STRUCT.fl_magnet = false

GRIPPER_MAGNET_CTRL_FUNCTION()

## Step1: Approach Valve Location

KINOVA_MANIPULATE_STRUCT.x = 0.3819
KINOVA_MANIPULATE_STRUCT.y = -0.2862
KINOVA_MANIPULATE_STRUCT.z = 0.3453

KINOVA_MANIPULATE_STRUCT.roll = -2.6902
KINOVA_MANIPULATE_STRUCT.pitch = 1.56
KINOVA_MANIPULATE_STRUCT.yaw = -3.0866

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()


## Step2: Contact witch Valve

KINOVA_MANIPULATE_STRUCT.x = 0.4052
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

## Step3: Magnet On

GRIPPER_MAGNET_CTRL_STRUCT.fl_magnet = true

GRIPPER_MAGNET_CTRL_FUNCTION()

A_Sleep(1000)
## Step4: Backward

KINOVA_MANIPULATE_STRUCT.x = 0.3289
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

A_Sleep(1000)

## Step5: Grasp Wrench

GRIPPER_FORCE_CTRL_STRUCT.pose_1 = 1800
GRIPPER_FORCE_CTRL_STRUCT.pose_2 = 1800

GRIPPER_FORCE_CTRL_STRUCT.forece_threshold = 200

GRIPPER_FORCE_CTRL_FUNCTION()

## Step6: Contact witch Valve

KINOVA_MANIPULATE_STRUCT.x = 0.4652
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

## Step7: Magnet Off

GRIPPER_MAGNET_CTRL_STRUCT.fl_magnet = false

GRIPPER_MAGNET_CTRL_FUNCTION()
A_Sleep(1000)
## Step8: Backward

KINOVA_MANIPULATE_STRUCT.x = 0.3289
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

##########################################_MISSION_END_##########################################

