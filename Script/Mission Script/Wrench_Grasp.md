/* Eurecar Scenario Script 
/* Made By Jun Hong 28.01.2017
/* This Script is for 2107 MBZIRC Challenge2
/*

# Title: Valve Recognition

## Step0: Magnet Off

GRIPPER_MAGNET_CTRL_STRUCT.fl_magnet = false

GRIPPER_MAGNET_CTRL_FUNCTION()

## Step1: Approach Valve Location

KINOVA_MANIPULATE_STRUCT.x = 0.4322
KINOVA_MANIPULATE_STRUCT.y = -0.2709
KINOVA_MANIPULATE_STRUCT.z = 0.3207

KINOVA_MANIPULATE_STRUCT.roll = -1.7237
KINOVA_MANIPULATE_STRUCT.pitch = 1.555
KINOVA_MANIPULATE_STRUCT.yaw = 2.2291

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()


## Step2: Contact witch Valve

KINOVA_MANIPULATE_STRUCT.x = 0.4652
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

## Step3: Magnet On

GRIPPER_MAGNET_CTRL_STRUCT.fl_magnet = true

GRIPPER_MAGNET_CTRL_FUNCTION()

A_Sleep(1000)
## Step4: Backward

KINOVA_MANIPULATE_STRUCT.x = 0.3289
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

A_Sleep(1000)
## Step5: Approach Valve Location

KINOVA_MANIPULATE_STRUCT.x = 0.4322
KINOVA_MANIPULATE_STRUCT.y = -0.2709
KINOVA_MANIPULATE_STRUCT.z = 0.3207

KINOVA_MANIPULATE_STRUCT.roll = -1.7237
KINOVA_MANIPULATE_STRUCT.pitch = 1.555
KINOVA_MANIPULATE_STRUCT.yaw = 2.2291

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

## Step6: Contact witch Valve

KINOVA_MANIPULATE_STRUCT.x = 0.4652
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

## Step7: Magnet Off

GRIPPER_MAGNET_CTRL_STRUCT.fl_magnet = false

GRIPPER_MAGNET_CTRL_FUNCTION()
A_Sleep(1000)
## Step8: Backward

KINOVA_MANIPULATE_STRUCT.x = 0.3289
KINOVA_MANIPULATE_STRUCT.y = ==
KINOVA_MANIPULATE_STRUCT.z = ==

KINOVA_MANIPULATE_STRUCT.roll = ==
KINOVA_MANIPULATE_STRUCT.pitch = ==
KINOVA_MANIPULATE_STRUCT.yaw = ==

KINOVA_MANIPULATE_STRUCT.force_threshold = 10

KINOVA_MANIPULATE_FUNCTION()

## Step2: Grasp 100

GRIPPER_FORCE_CTRL_STRUCT.bend_deg = 180
GRIPPER_FORCE_CTRL_STRUCT.forece_threshold = 0

GRIPPER_FORCE_CTRL_FUNCTION()

## Step3: Grasp 0

GRIPPER_FORCE_CTRL_STRUCT.bend_deg = 130
GRIPPER_FORCE_CTRL_STRUCT.forece_threshold = 150

GRIPPER_FORCE_CTRL_FUNCTION()
##########################################_MISSION_END_##########################################

